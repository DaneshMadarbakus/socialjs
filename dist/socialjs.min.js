/*! socialjs - v2.1.0 - 2017-09-06
* https://github.com/SubZane/socialjs
* Copyright (c) 2017 Andreas Norman; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],b(a)):"object"==typeof exports?module.exports=b(a):a.socialjs=b(a)}("undefined"!=typeof global?global:this.window||this.global,function(a){"use strict";var b,c,d={},e=!!document.querySelector&&!!a.addEventListener,f=0,g=0,h=0,i=0,j=0,k=0,l={container:".socialjs",fetchCounts:!0,shortCount:!0,https:!1,urls:{GooglePlus:"backend/GooglePlusCall.php",Pinterest:"backend/PinterestCall.php",Facebook:"http://graph.facebook.com/",Linkedin:"http://www.linkedin.com/countserv/count/share",Reddit:"http://www.reddit.com/api/info.json"},onInit:function(){},OnAttachEvents:function(){},onDestroy:function(){},onClick:function(){}},m=function(){var a=c.querySelectorAll(".sharebutton");E(a,function(a,c){"twitter"===a.getAttribute("data-sharetype")?(w(a),b.fetchCounts&&n(a)):"facebook"===a.getAttribute("data-sharetype")?(s(a),b.fetchCounts&&o(a)):"linkedin"===a.getAttribute("data-sharetype")?(t(a),b.fetchCounts&&p(a)):"googleplus"===a.getAttribute("data-sharetype")?(v(a),b.fetchCounts&&r(a)):"reddit"===a.getAttribute("data-sharetype")&&(u(a),b.fetchCounts&&q(a))}),C("OnAttachEvents")},n=function(a){var b=z(a,"basecount");a.querySelector(".count").innerHTML=x(b),f+=b,g=b},o=function(a){var c=b.urls.Facebook+"?id="+y(a),d=new XMLHttpRequest;d.open("GET",c,!0),d.onload=function(){if(d.status>=200&&d.status<400){var b=0,c=JSON.parse(d.response);"undefined"!=typeof c.shares?(b=parseInt(z(a,"basecount"))+parseInt(c.shares,10),a.querySelector(".count").innerHTML=x(b),f+=b,h=b):(b=parseInt(z(a,"basecount")),a.querySelector(".count").innerHTML=x(b),f+=b,h=b)}},d.onerror=function(){},d.send()},p=function(a){var c=b.urls.Linkedin+"?url="+y(a);A(c,function(b){var c=parseInt(z(a,"basecount"))+parseInt(b.count,10);a.querySelector(".count").innerHTML=x(c),f+=c,i=c})},q=function(a){var c=b.urls.Reddit+"?url="+y(a),d=new XMLHttpRequest;d.open("GET",c,!0),d.onload=function(){if(d.status>=200&&d.status<400){var b=JSON.parse(d.response),c=0;Array.isArray(b.data.children)&&b.data.children.length?(c=parseInt(z(a,"basecount"))+parseInt(b.data.children[0].data.score,10),a.querySelector(".count").innerHTML=x(c),f+=c,k=c):(c=parseInt(z(a,"basecount")),a.querySelector(".count").innerHTML=x(c),f+=c,k=c)}},d.onerror=function(){},d.send()},r=function(a){var c=b.urls.GooglePlus+"?url="+y(a),d=new XMLHttpRequest;d.open("GET",c,!0),d.onload=function(){if(d.status>=200&&d.status<400){var b=JSON.parse(d.response),c=parseInt(z(a,"basecount"))+parseInt(b,10);a.querySelector(".count").innerHTML=x(c),f+=c,j=c}},d.onerror=function(){},d.send()},s=function(a){a.addEventListener("click",function(b){b.preventDefault(),C("onClick");var c=y(a),d="u="+encodeURIComponent(c);encodeURIComponent(c);return window.facebook=window.facebook||{},window.facebook.shareWin=window.open("https://www.facebook.com/sharer/sharer.php?"+d,"",B()),!1})},t=function(a){a.addEventListener("click",function(b){b.preventDefault(),C("onClick");var c=a.hasAttribute("data-referer")?a.getAttribute("data-referer"):"",d=y(a),e="original_referer="+encodeURIComponent(c)+"&url="+encodeURIComponent(d);encodeURIComponent(d);return window.GooglePlus=window.GooglePlus||{},window.GooglePlus.shareWin=window.open("https://www.linkedin.com/cws/share?"+e+"&isFramed=true","",B()),!1})},u=function(a){a.addEventListener("click",function(b){b.preventDefault(),C("onClick");var c=y(a),d="url="+encodeURIComponent(c);encodeURIComponent(c);return window.Reddit=window.Reddit||{},window.Reddit.shareWin=window.open("https://www.reddit.com/submit?"+d,"",B()),!1})},v=function(a){a.addEventListener("click",function(b){b.preventDefault(),C("onClick");var c=a.hasAttribute("data-text")?a.getAttribute("data-text"):"",d=y(a),e="text="+encodeURIComponent(c)+"&url="+encodeURIComponent(d);encodeURIComponent(d);return window.GooglePlus=window.GooglePlus||{},window.GooglePlus.shareWin=window.open("https://plus.google.com/share?"+e,"",B()),!1})},w=function(a){a.addEventListener("click",function(b){b.preventDefault(),C("onClick");var c=a.hasAttribute("data-text")?a.getAttribute("data-text"):"",d=y(a),e=a.hasAttribute("data-via")?a.getAttribute("data-via"):"",f=a.hasAttribute("related")?a.getAttribute("related"):"",g="text="+encodeURIComponent(c)+"&url="+encodeURIComponent(d)+"&via="+e+"&related="+f;encodeURIComponent(d);return window.Twitter=window.Twitter||{},window.Twitter.shareWin=window.open("https://twitter.com/intent/tweet?"+g,"",B()),!1})},x=function(a){return b.shortCount&&(a>=1e6?a=parseInt((a/1e6).toFixed(2),10)+"M":a>=1e3&&(a=parseInt((a/1e3).toFixed(1),10)+"k")),a},y=function(a){var b=a.getAttribute("data-url");return"undefined"!=typeof b&&null!==b&&""!==b?b:window.location.href},z=function(a,b){var c=a.getAttribute("data-"+b);return"undefined"!=typeof c?c:""},A=function(a,b){var c="jsonp_callback_"+Math.round(1e5*Math.random());window[c]=function(a){delete window[c],document.body.removeChild(d),b(a)};var d=document.createElement("script");d.src=a+(a.indexOf("?")>=0?"&":"?")+"callback="+c,document.body.appendChild(d)},B=function(){var a=550,b=335,c=screen.height,d=screen.width,e=Math.round(d/2-a/2),f=0;document;return c>b&&(f=Math.round(c/2-b/2)),"left="+e+",top="+f+",width="+a+",height="+b+",personalbar=0,toolbar=0,scrollbars=1,resizable=1"},C=function(a){void 0!==b[a]&&b[a].call(c)},D=function(a,b){var c={};return E(a,function(b,d){c[d]=a[d]}),E(b,function(a,d){c[d]=b[d]}),c},E=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=0,f=a.length;e<f;e++)b.call(c,a[e],e,a)};return d.destroy=function(){b&&(document.documentElement.classList.remove(b.initClass),document.removeEventListener("click",eventHandler,!1),b=null,C("onDestroy"))},d.init=function(a){e&&(a.https===!0&&(l.urls.Facebook="https://graph.facebook.com/",l.urls.Linkedin="https://www.linkedin.com/countserv/count/share",l.urls.Reddit="https://www.reddit.com/api/info.json"),"localhost"===document.location.hostname&&console.warn("SocialJS will not work properly when run on localhost. The URL must be accessible from the outside."),d.destroy(),b=D(l,a||{}),c=document.querySelector(b.container),m(),C("onInit"))},d.getCount={Total:function(){return f},Facebook:function(){return h},Linkedin:function(){return i},GooglePlus:function(){return j},Reddit:function(){return k}},d});