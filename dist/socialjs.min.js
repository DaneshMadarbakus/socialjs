/*! socialjs - v2.0.0-beta - 2016-06-28
* https://github.com/SubZane/socialjs
* Copyright (c) 2016 Andreas Norman; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],b(a)):"object"==typeof exports?module.exports=b(a):a.socialjs=b(a)}("undefined"!=typeof global?global:this.window||this.global,function(a){"use strict";var b,c,d,e={},f=!!document.querySelector&&!!a.addEventListener,g=0,h=0,i=0,j=0,k=0,l=0,m={container:".socialjs",fetchCounts:!0,shortCount:!0,onInit:function(){},OnAttachEvents:function(){},onDestroy:function(){},onClick:function(){}},n={GooglePlus:"backend/GooglePlusCall.php",Pinterest:"backend/PinterestCall.php",Facebook:"http://graph.facebook.com/",Linkedin:"http://www.linkedin.com/countserv/count/share",Reddit:"http://www.reddit.com/api/info.json"},o=function(){var a=d.querySelectorAll(".sharebutton");F(a,function(a){"twitter"===a.getAttribute("data-sharetype")?(y(a),b.fetchCounts&&p(a)):"facebook"===a.getAttribute("data-sharetype")?(u(a),b.fetchCounts&&q(a)):"linkedin"===a.getAttribute("data-sharetype")?(v(a),b.fetchCounts&&r(a)):"googleplus"===a.getAttribute("data-sharetype")?(x(a),b.fetchCounts&&t(a)):"reddit"===a.getAttribute("data-sharetype")&&(w(a),b.fetchCounts&&s(a))}),D("OnAttachEvents")},p=function(a){var b=B(a,"basecount");a.querySelector(".count").innerHTML=z(b),g+=b,h=b},q=function(a){var b=n.Facebook+"?id="+A(a),c=new XMLHttpRequest;c.open("GET",b,!0),c.onload=function(){if(c.status>=200&&c.status<400){var b=0,d=JSON.parse(c.response);"undefined"!=typeof d.shares?(b=B(a,"basecount")+parseInt(d.shares,10),a.querySelector(".count").innerHTML=z(b),g+=b,i=b):(b=B(a,"basecount"),a.querySelector(".count").innerHTML=z(b),g+=b,i=b)}},c.onerror=function(){},c.send()},r=function(a){var b=n.Linkedin+"?url="+A(a),c=new XMLHttpRequest;c.open("GET",b,!0),c.onload=function(){if(c.status>=200&&c.status<400){var b=JSON.parse(c.response),d=B(a,"basecount")+parseInt(b.shares,10);a.querySelector(".count").innerHTML=z(d),g+=d,j=d}},c.onerror=function(){},c.send()},s=function(a){var b=n.Reddit+"?url="+A(a),c=new XMLHttpRequest;c.open("GET",b,!0),c.onload=function(){if(c.status>=200&&c.status<400){var b=JSON.parse(c.response),d=0;Array.isArray(b.data.children)&&b.data.children.length?(d=B(a,"basecount")+parseInt(b.data.children[0].data.score,10),a.querySelector(".count").innerHTML=z(d),g+=d,l=d):(d=B(a,"basecount"),a.querySelector(".count").innerHTML=z(d),g+=d,l=d)}},c.onerror=function(){},c.send()},t=function(a){var b=n.GooglePlus+"?url="+A(a),c=new XMLHttpRequest;c.open("GET",b,!0),c.onload=function(){if(c.status>=200&&c.status<400){var b=JSON.parse(c.response),d=B(a,"basecount")+parseInt(b,10);a.querySelector(".count").innerHTML=z(d),g+=d,k=d}},c.onerror=function(){},c.send()},u=function(a){a.addEventListener("click",function(a){a.preventDefault(),D("onClick");{var b=this.hasAttribute("url")?this.getAttribute("url"):"",c="u="+encodeURIComponent(b);encodeURIComponent(b)}return window.facebook=window.facebook||{},window.facebook.shareWin=window.open("https://www.facebook.com/sharer/sharer.php?"+c,"",C()),!1})},v=function(a){a.addEventListener("click",function(a){a.preventDefault(),D("onClick");{var b=this.hasAttribute("referer")?this.getAttribute("referer"):"",c=this.hasAttribute("url")?this.getAttribute("url"):"",d="original_referer="+encodeURIComponent(b)+"&url="+encodeURIComponent(c);encodeURIComponent(c)}return window.GooglePlus=window.GooglePlus||{},window.GooglePlus.shareWin=window.open("https://www.linkedin.com/cws/share?"+d+"&isFramed=true","",C()),!1})},w=function(a){a.addEventListener("click",function(a){a.preventDefault(),D("onClick");{var b=this.hasAttribute("url")?this.getAttribute("url"):"",c="url="+encodeURIComponent(b);encodeURIComponent(b)}return window.Reddit=window.Reddit||{},window.Reddit.shareWin=window.open("http://www.reddit.com/submit?"+c,"",C()),!1})},x=function(a){a.addEventListener("click",function(a){a.preventDefault(),D("onClick");{var b=this.hasAttribute("text")?this.getAttribute("text"):"",c=this.hasAttribute("url")?this.getAttribute("url"):"",d="text="+encodeURIComponent(b)+"&url="+encodeURIComponent(c);encodeURIComponent(c)}return window.GooglePlus=window.GooglePlus||{},window.GooglePlus.shareWin=window.open("https://plus.google.com/share?"+d,"",C()),!1})},y=function(a){a.addEventListener("click",function(a){a.preventDefault(),D("onClick");{var b=this.hasAttribute("text")?this.getAttribute("text"):"",c=this.hasAttribute("url")?this.getAttribute("url"):"",d=this.hasAttribute("via")?this.getAttribute("via"):"",e=this.hasAttribute("related")?this.getAttribute("related"):"",f="text="+encodeURIComponent(b)+"&url="+encodeURIComponent(c)+"&via="+d+"&related="+e;encodeURIComponent(c)}return window.Twitter=window.Twitter||{},window.Twitter.shareWin=window.open("https://twitter.com/intent/tweet?"+f,"",C()),!1})},z=function(a){return b.shortCount&&(a>=1e6?a=parseInt((a/1e6).toFixed(2),10)+"M":a>=1e3&&(a=parseInt((a/1e3).toFixed(1),10)+"k")),a},A=function(a){var b=a.getAttribute("data-url");return"undefined"!=typeof b&&null!==b&&""!==b?b:window.location.href},B=function(a,b){var c=a.getAttribute("data-"+b);return"undefined"!=typeof c?c:""},C=function(){{var a=550,b=335,c=screen.height,d=screen.width,e=Math.round(d/2-a/2),f=0;document}return c>b&&(f=Math.round(c/2-b/2)),"left="+e+",top="+f+",width="+a+",height="+b+",personalbar=0,toolbar=0,scrollbars=1,resizable=1"},D=function(a){void 0!==b[a]&&b[a].call(d)},E=function(a,b){var c={};return F(a,function(b,d){c[d]=a[d]}),F(b,function(a,d){c[d]=b[d]}),c},F=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=0,f=a.length;f>e;e++)b.call(c,a[e],e,a)};return e.destroy=function(){b&&(document.documentElement.classList.remove(b.initClass),document.removeEventListener("click",eventHandler,!1),b=null,c=null,D("onDestroy"))},e.init=function(a){f&&(e.destroy(),b=E(m,a||{}),d=document.querySelector(b.container),o(),D("onInit"))},e.getCount={Total:function(){return g},Facebook:function(){return i},Linkedin:function(){return j},GooglePlus:function(){return k},Reddit:function(){return l}},e});