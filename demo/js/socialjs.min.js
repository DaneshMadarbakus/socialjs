/*! socialjs - v1.0.0 - 2016-06-27
* https://github.com/SubZane/socialjs
* Copyright (c) 2016 Andreas Norman; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],b(a)):"object"==typeof exports?module.exports=b(a):a.socialjs=b(a)}("undefined"!=typeof global?global:this.window||this.global,function(a){"use strict";var b,c,d,e={},f=!!document.querySelector&&!!a.addEventListener,g=0,h=0,i=0,j=0,k=0,l=0,m={container:".socialjs",onInit:function(){},OnAttachEvents:function(){},onDestroy:function(){},onClick:function(){}},n={GooglePlus:"api/GooglePlusCall.php",Pinterest:"api/PinterestCall.php",Facebook:"http://graph.facebook.com/",Linkedin:"http://www.linkedin.com/countserv/count/share",Reddit:"http://www.reddit.com/api/info.json"},o=function(){var a=d.querySelectorAll(".sharebutton");D(a,function(a){"twitter"===a.getAttribute("data-sharetype")?(x(a),b.fetchCounts&&fetchTwitterCount(a)):"facebook"===a.getAttribute("data-sharetype")?(t(a),b.fetchCounts&&p(a)):"linkedin"===a.getAttribute("data-sharetype")?(u(a),b.fetchCounts&&q(a)):"googleplus"===a.getAttribute("data-sharetype")?(w(a),b.fetchCounts&&s(a)):"reddit"===a.getAttribute("data-sharetype")&&(v(a),b.fetchCounts&&r(a))}),B("OnAttachEvents")},p=function(a){var b=n.Facebook+"?id="+z(a,"url"),c=new XMLHttpRequest;c.open("GET",b,!0),c.onload=function(){if(c.status>=200&&c.status<400){var b=0,d=JSON.parse(c.response);"undefined"!=typeof d.shares?(b=z(a,"basecount")+parseInt(d.shares,10),a.querySelector(".count").innerHTML=y(b),g+=b,h=b):(b=z(a,"basecount"),a.querySelector(".count").innerHTML=y(b),g+=b,h=b)}},c.onerror=function(){},c.send()},q=function(a){var b=n.Linkedin+"?url="+z(a,"url")+"&callback=?",c=new XMLHttpRequest;c.open("GET",b,!0),c.onload=function(){if(c.status>=200&&c.status<400){var b=JSON.parse(c.response),d=z(a,"basecount")+parseInt(b.shares,10);a.querySelector(".count").innerHTML=y(d),g+=d,i=d}},c.onerror=function(){},c.send()},r=function(a){var b=n.Reddit+"?url="+z(a,"url"),c=new XMLHttpRequest;c.open("GET",b,!0),c.onload=function(){if(c.status>=200&&c.status<400){var b=z(a,"basecount")+parseInt(response,10);a.querySelector(".count").innerHTML=y(b),g+=b,k=b}},c.onerror=function(){},c.send()},s=function(a){$.ajax({url:n.GooglePlus+"?url="+getButtonURL(a),async:!0,dataType:"text"}).done(function(b){var c=getBaseCount(a)+parseInt(b,10);$(a).find(".count").html(y(c)),g+=c,j=c})},t=function(a){a.addEventListener("click",function(a){a.preventDefault(),B("onClick");{var b=this.hasAttribute("url")?this.getAttribute("url"):"",c="u="+encodeURIComponent(b);encodeURIComponent(b)}return window.facebook=window.facebook||{},window.facebook.shareWin=window.open("https://www.facebook.com/sharer/sharer.php?"+c,"",A()),!1})},u=function(a){a.addEventListener("click",function(a){a.preventDefault(),B("onClick");{var b=this.hasAttribute("referer")?this.getAttribute("referer"):"",c=this.hasAttribute("url")?this.getAttribute("url"):"",d="original_referer="+encodeURIComponent(b)+"&url="+encodeURIComponent(c);encodeURIComponent(c)}return window.GooglePlus=window.GooglePlus||{},window.GooglePlus.shareWin=window.open("https://www.linkedin.com/cws/share?"+d+"&isFramed=true","",A()),!1})},v=function(a){a.addEventListener("click",function(a){a.preventDefault(),B("onClick");{var b=this.hasAttribute("url")?this.getAttribute("url"):"",c="url="+encodeURIComponent(b);encodeURIComponent(b)}return window.Reddit=window.Reddit||{},window.Reddit.shareWin=window.open("http://www.reddit.com/submit?"+c,"",A()),!1})},w=function(a){a.addEventListener("click",function(a){a.preventDefault(),B("onClick");{var b=this.hasAttribute("text")?this.getAttribute("text"):"",c=this.hasAttribute("url")?this.getAttribute("url"):"",d="text="+encodeURIComponent(b)+"&url="+encodeURIComponent(c);encodeURIComponent(c)}return window.GooglePlus=window.GooglePlus||{},window.GooglePlus.shareWin=window.open("https://plus.google.com/share?"+d,"",A()),!1})},x=function(a){a.addEventListener("click",function(a){a.preventDefault(),B("onClick");{var b=this.hasAttribute("text")?this.getAttribute("text"):"",c=this.hasAttribute("url")?this.getAttribute("url"):"",d=this.hasAttribute("via")?this.getAttribute("via"):"",e=this.hasAttribute("related")?this.getAttribute("related"):"",f="text="+encodeURIComponent(b)+"&url="+encodeURIComponent(c)+"&via="+d+"&related="+e;encodeURIComponent(c)}return window.Twitter=window.Twitter||{},window.Twitter.shareWin=window.open("https://twitter.com/intent/tweet?"+f,"",A()),!1})},y=function(a){return options.shortCount&&(a>=1e6?a=parseInt((a/1e6).toFixed(2),10)+"M":a>=1e3&&(a=parseInt((a/1e3).toFixed(1),10)+"k")),a},z=function(a,b){var c=a.getAttribute("data-"+b);return"undefined"!=typeof c?c:""},A=function(){{var a=550,b=335,c=screen.height,d=screen.width,e=Math.round(d/2-a/2),f=0;document}return c>b&&(f=Math.round(c/2-b/2)),"left="+e+",top="+f+",width="+a+",height="+b+",personalbar=0,toolbar=0,scrollbars=1,resizable=1"},B=function(a){void 0!==b[a]&&b[a].call(d)},C=function(a,b){var c={};return D(a,function(b,d){c[d]=a[d]}),D(b,function(a,d){c[d]=b[d]}),c},D=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=0,f=a.length;f>e;e++)b.call(c,a[e],e,a)};return e.destroy=function(){b&&(document.documentElement.classList.remove(b.initClass),document.removeEventListener("click",eventHandler,!1),b=null,c=null,B("onDestroy"))},e.init=function(a){f&&(e.destroy(),b=C(m,a||{}),d=document.querySelector(b.container),o(),B("onInit"))},e.getCount={Total:function(){return g},Facebook:function(){return h},Linkedin:function(){return i},GooglePlus:function(){return j},Reddit:function(){return l}},e});